import java.util.ArrayList;
import processing.core.PApplet;

public class TrianglePen {

  private boolean mouseWasPressed; // mousePressed from previous update() call
  private char keyWasPressed; // keyPressed from previous update() call
  private static boolean showPoints;
  private static PApplet processing; // PApplet object that represents
  // the graphic display window
  private ArrayList<Point> points;
  private ArrayList<Triangle> triangles;

  public TrianglePen(PApplet processing, boolean showPoints) {
    this.processing = processing;
    this.showPoints = showPoints;
    points = new ArrayList<Point>();
    triangles = new ArrayList<Triangle>();
  }

  public void update(int mouseX, int mouseY, boolean mousePressed, char keyPressed) {
    // process mouse-based user input
    if (mousePressed != mouseWasPressed) {
      if (mousePressed)
        handleMousePress(mouseX, mouseY);
      else
        handleMouseRelease(mouseX, mouseY);
    }
    if (mousePressed)
      handleMouseDrag(mouseX, mouseY);
    mouseWasPressed = mousePressed;
    // process keyboard-based user input
    if (keyPressed != keyWasPressed)
      handleKeyPress(mouseX, mouseY, keyPressed);
    keyWasPressed = keyPressed;
    // draw everything in its current state
    draw();
  }

  private void handleMousePress(int mouseX, int mouseY) {
    if (processing.mousePressed) {
      points.add(new Point(mouseX, mouseY));
      if (points.size() % 3 == 0)
        triangles.add(new Triangle(points.get(points.size() - 3), points.get(points.size() - 2),
            points.get(points.size() - 1), (int)(Math.random()*8)));
    }
  }

  private void handleMouseRelease(int mouseX, int mouseY) {

  }

  private void handleMouseDrag(int mouseX, int mouseY) {

  }

  private void handleKeyPress(int mouseX, int mouseY, char keyPressed) {

  }

  private void draw() {

  }
}
